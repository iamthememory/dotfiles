[
  {
    "type": "talk_topic",
    "id": "TALK_PERK_MENU_MAIN",
    "responses": [
      {
        "condition": { "not": { "u_has_trait": "perk_haulers_aura" } },
        "text": "Gain [<trait_name:perk_haulers_aura>]",
        "topic": "TALK_PERK_MENU_HAULERS_AURA"
      },
      {
        "condition": { "not": { "u_has_trait": "perk_haulers_holster" } },
        "text": "Gain [<trait_name:perk_haulers_holster>]",
        "topic": "TALK_PERK_MENU_HAULERS_HOLSTER"
      },
      {
        "condition": { "not": { "u_has_trait": "perk_animal_hauler" } },
        "text": "Gain [<trait_name:perk_animal_hauler>]",
        "topic": "TALK_PERK_MENU_ANIMAL_HAULER"
      },
      {
        "condition": { "not": { "u_has_trait": "perk_cbm_integrator" } },
        "text": "Gain [<trait_name:perk_cbm_integrator>]",
        "topic": "TALK_PERK_MENU_CBM_INTEGRATOR"
      },
      {
        "condition": { "not": { "u_has_trait": "perk_cbm_hunter" } },
        "text": "Gain [<trait_name:perk_cbm_hunter>]",
        "topic": "TALK_PERK_MENU_CBM_HUNTER"
      },
      {
        "condition": { "not": { "u_has_trait": "perk_pocket_world" } },
        "text": "Gain [<trait_name:perk_pocket_world>]",
        "topic": "TALK_PERK_MENU_POCKET_WORLD"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_PERK_MENU_HAULERS_AURA",
    "dynamic_line": "<trait_name:perk_haulers_aura>: \"<trait_description:perk_haulers_aura>\"",
    "responses": [
      {
        "text": "Select Perk.",
        "topic": "TALK_PERK_MENU_MAIN",
        "condition": { "math": [ "u_num_perks > 0" ] },
        "failure_topic": "TALK_PERK_MENU_FAIL",
        "effect": [ { "u_add_trait": "perk_haulers_aura" }, { "math": [ "u_num_perks--" ] } ]
      },
      { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
      { "text": "Quit.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_PERK_MENU_HAULERS_HOLSTER",
    "dynamic_line": "<trait_name:perk_haulers_holster>: \"<trait_description:perk_haulers_holster>\"",
    "responses": [
      {
        "text": "Select Perk.",
        "topic": "TALK_PERK_MENU_MAIN",
        "condition": { "math": [ "u_num_perks > 0" ] },
        "failure_topic": "TALK_PERK_MENU_FAIL",
        "effect": [ { "u_add_trait": "perk_haulers_holster" }, { "math": [ "u_num_perks--" ] } ]
      },
      { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
      { "text": "Quit.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_PERK_MENU_ANIMAL_HAULER",
    "dynamic_line": "<trait_name:perk_animal_hauler>: \"<trait_description:perk_animal_hauler>\"",
    "responses": [
      {
        "text": "Select Perk.",
        "topic": "TALK_PERK_MENU_MAIN",
        "condition": { "math": [ "u_num_perks > 0" ] },
        "failure_topic": "TALK_PERK_MENU_FAIL",
        "effect": [
          { "u_add_trait": "perk_animal_hauler" },
          { "math": [ "u_num_perks--" ] },
          { "u_add_effect": "effect_perk_animal_hauler_available", "duration": "PERMANENT" }
        ]
      },
      { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
      { "text": "Quit.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_PERK_MENU_CBM_INTEGRATOR",
    "dynamic_line": "<trait_name:perk_cbm_integrator>: \"<trait_description:perk_cbm_integrator>\"",
    "responses": [
      {
        "text": "Select Perk.",
        "topic": "TALK_PERK_MENU_MAIN",
        "condition": { "math": [ "u_num_perks > 0" ] },
        "failure_topic": "TALK_PERK_MENU_FAIL",
        "effect": [
          { "u_add_trait": "CBM_Interface" },
          { "u_add_bionic": "bio_power_storage" },
          { "u_add_bionic": "bio_cable" },
          { "u_add_trait": "perk_cbm_integrator" },
          { "math": [ "u_num_perks--" ] }
        ]
      },
      { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
      { "text": "Quit.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_PERK_MENU_CBM_HUNTER",
    "dynamic_line": "<trait_name:perk_cbm_hunter>: \"<trait_description:perk_cbm_hunter>\"",
    "responses": [
      {
        "text": "Select Perk.",
        "topic": "TALK_PERK_MENU_MAIN",
        "condition": { "math": [ "u_num_perks > 0" ] },
        "failure_topic": "TALK_PERK_MENU_FAIL",
        "effect": [
          { "u_add_trait": "perk_cbm_hunter" },
          { "math": [ "u_num_perks--" ] }
        ]
      },
      { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
      { "text": "Quit.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_PERK_MENU_POCKET_WORLD",
    "dynamic_line": "<trait_name:perk_pocket_world>: \"<trait_description:perk_pocket_world>\"",
    "responses": [
      {
        "text": "Select Perk.",
        "topic": "TALK_PERK_MENU_MAIN",
        "condition": { "math": [ "u_num_perks > 0" ] },
        "failure_topic": "TALK_PERK_MENU_FAIL",
        "effect": [
          { "u_add_trait": "perk_pocket_world" },
          { "math": [ "u_num_perks--" ] }
        ]
      },
      { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
      { "text": "Quit.", "topic": "TALK_DONE" }
    ]
  }
]
