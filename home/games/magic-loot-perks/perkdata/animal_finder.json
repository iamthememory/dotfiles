[
  {
    "type": "effect_on_condition",
    "id": "EOC_PERK_ANIMAL_FINDER_ACTIVATED",
    "effect": [
      {
        "if": { "not": { "u_has_effect": "effect_perk_animal_finder_cooldown" } },
        "then": [
          { "u_message": "You notice an animal nearby.", "type": "good" },
          { "run_eocs": [ "EOC_PERK_ANIMAL_FINDER_SPAWN_ANIMAL" ] }
        ],
        "else": [
          { "u_message": "You don't see any animals around.", "type": "bad" }
        ]
      }
    ]
  },
  {
    "id": "effect_perk_animal_finder_cooldown",
    "type": "effect_type",
    "name": [ "" ],
    "desc": [ "" ]
  },
  {
    "id": "effect_perk_animal_finder_available",
    "type": "effect_type",
    "name": [ "Animal Finder" ],
    "desc": [ "You can feel an animal nearby, and maybe you could attract it with your magic." ]
  },
  {
    "id": "EOC_PERK_ANIMAL_FINDER_EXPIRE_COOLDOWN",
    "type": "effect_on_condition",
    "eoc_type": "EVENT",
    "required_event": "character_loses_effect",
    "condition": { "compare_string": [ "effect_perk_animal_finder_cooldown", { "context_val": "effect" } ] },
    "effect": [
      { "u_add_effect": "effect_perk_animal_finder_available", "duration": "PERMANENT" }
    ]
  },
  {
    "id": "EOC_PERK_ANIMAL_FINDER_SPAWN_ANIMAL",
    "type": "effect_on_condition",
    "effect": [
      {
        "u_spawn_monster": "perk_animal_finder_monsters",
        "real_count": 1,
        "group": true,
        "max_radius": 8
        "true_eocs": [
          {
            "id": "EOC_PERK_ANIMAL_FINDER_SPAWN_ANIMAL_START_COOLDOWN",
            "effect": [
              { "u_lose_effect": "effect_perk_animal_hauler_available" },
              { "u_add_effect": "effect_perk_animal_hauler_cooldown", "duration": { "math": [ "864000 + rand(864000)" ] } }
            ]
          }
        ]
      }
    ]
  },
  {
    "id": "perk_animal_finder_monsters",
    "type": "monstergroup",
    "monsters": [
      { "group": "GROUP_PET_CATS", "weight": 1 },
      { "group": "GROUP_PET_DOGS", "weight": 1 },
      { "monster": "mon_cow", "weight": 1 },
      { "monster": "mon_horse", "weight": 1 },
      { "monster": "mon_pig_piglet", "weight": 1 },
      { "monster": "mon_rabbit", "weight": 1 },
      { "monster": "mon_sheep", "weight": 1 },
      { "monster": "mon_llama", "weight": 1 },
      { "monster": "mon_ferret", "weight": 1 },
      { "monster": "mon_lab_rat", "weight": 1 },
      { "monster": "mon_chicken", "weight": 1 },
      { "monster": "mon_duck_domestic", "weight": 1 },
      { "monster": "mon_turkey_domestic", "weight": 1 },
      { "monster": "mon_crow_chick", "weight": 1 },
      { "monster": "mon_pheasant_chick", "weight": 1 },
      { "monster": "mon_pigeon", "weight": 1 },
      { "monster": "mon_goose", "weight": 1 },
      { "monster": "mon_guinea_fowl", "weight": 1 }
    ]
  }
]
