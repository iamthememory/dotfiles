[
  {
    "type": "effect_on_condition",
    "id": "EOC_PERK_ANIMAL_HAULER_ACTIVATED",
    "effect": [
      {
        "if": { "not": { "u_has_effect": "effect_perk_animal_hauler_cooldown" } },
        "then": [
          { "u_lose_effect": "effect_perk_animal_hauler_available" },
          { "u_message": "You construct an animal carrier from magic.", "type": "good" },
          { "u_spawn_item": "perk_animal_hauler_carrier" },
          { "u_add_effect": "effect_perk_animal_hauler_cooldown", "duration": { "math": [ "864000 + rand(864000)" ] } }
        ],
        "else": [
          { "u_message": "You need more time before you can make a new carrier.", "type": "bad" }
        ]
      }
    ]
  },
  {
    "id": "perk_animal_hauler_carrier",
    "type": "ITEM",
    "subtypes": [ "TOOL" ],
    "name": { "str": "dimensional animal carrier" },
    "description": "A deceptively small animal carrier that leads to its own pocket dimension.",
    "weight": "1 kg",
    "volume": "1 L",
    "material": [ "alien_resin" ],
    "symbol": "#",
    "color": "light_gray",
    "properties": { "creature_size_capacity": "HUGE" },
    "use_action": [ "CAPTURE_MONSTER_ACT" ],
    "flags": [ "TRADER_AVOID", "UNBREAKABLE" ],
    "looks_like": "pet_carrier"
  },
  {
    "id": "effect_perk_animal_hauler_cooldown",
    "type": "effect_type",
    "name": [ "" ],
    "desc": [ "" ]
  },
  {
    "id": "effect_perk_animal_hauler_available",
    "type": "effect_type",
    "name": [ "Animal Hauler" ],
    "desc": [ "You can make an animal container from your magic." ]
  },
  {
    "id": "EOC_PERK_ANIMAL_HAULER_EXPIRE_COOLDOWN",
    "type": "effect_on_condition",
    "eoc_type": "EVENT",
    "required_event": "character_loses_effect",
    "condition": { "compare_string": [ "effect_perk_animal_hauler_cooldown", { "context_val": "effect" } ] },
    "effect": [
      { "u_add_effect": "effect_perk_animal_hauler_available", "duration": "PERMANENT" }
    ]
  },
  {
    "id": "EOC_PERK_ANIMAL_HAULER_MUTATION_GAIN",
    "type": "effect_on_condition",
    "eoc_type": "EVENT",
    "required_event": "gains_mutation",
    "condition": { "compare_string": [ "perk_animal_hauler", { "context_val": "trait" } ] },
    "effect": [
      { "u_add_effect": "effect_perk_animal_hauler_available", "duration": "PERMANENT" }
    ]
  }
]
