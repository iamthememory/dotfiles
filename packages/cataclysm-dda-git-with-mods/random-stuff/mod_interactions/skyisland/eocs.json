[
  {
    "type": "effect_on_condition",
    "id": "EOC_award_material_tokens_set_multiplier",
    "eoc_type": "EVENT",
    "required_event": "game_begin",
    "condition": { "not": { "math": [ "has_var(u_owed_material_tokens_multiplier)" ] } },
    "effect": [ { "math": [ "u_owed_material_tokens_multiplier = 1.0" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_award_material_tokens",
    "//": "If you got home via an exit portal, award material tokens based on raid length.",
    "condition": { "math": [ "gettokens == 1" ] },
    "effect": [
      { "math": [ "gettokens = 0" ] },
      { "math": [ "owed_material_tokens = lengthofthisraid * 75 + 50" ] },
      { "math": [ "owed_material_tokens = ceil(owed_material_tokens * u_owed_material_tokens_multiplier)" ] },
      {
        "u_message": "You've returned home safely using a designated exit point.  You have earned <global_val:owed_material_tokens> material tokens for your success.",
        "popup": true
      },
      { "u_spawn_item": "warptoken_material", "count": { "global_val": "owed_material_tokens", "default": 50 } }
    ]
  }
]
