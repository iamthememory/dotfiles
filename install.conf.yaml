- defaults:
    link:
      relink: true
      create: true
      force: true

- clean:
    - '~'


# Basic config.

- shell:
    -
      - install -d -m 750 ~/.config
      - Creating ~/.config
    -
      - install -d -m 750 ~/.env.d
      - Creating ~/.env.d
    -
      - install -d -m 750 ~/.local/bin
      - Creating ~/.local/bin
    -
      - install -d -m 750 ~/.local/lib64
      - Creating ~/.local/lib64
    -
      - install -d -m 750 ~/.local/share/man
      - Creating ~/.local/share/man

- link:
    ~/.dotfiles: ''
    ~/bin: ~/.local/bin
    ~/.local/man: ~/.local/share/man
    ~/.local/lib: ~/.local/lib64
    ~/Documents: ~/src
    ~/.env: base/env
    ~/.env.d:
      glob: true
      path: base/env.d/*

- clean:
    - ~/.config
    - ~/.env.d


# Useful scripts.

- link:
    ~/.local/bin/:
      path: scripts/bin/*
      glob: true

- clean:
    - ~/.local/bin


# Perl config.

- shell:
    -
      - ./perl/setup-local.sh
      - Setting up a local Perl 5 directory

- link:
    ~/.env.d:
      glob: true
      path: perl/env.d/*


# Python config.

- link:
    ~/.pythonrc.py: python/pythonrc.py
    ~/.env.d:
      glob: true
      path: python/env.d/*


# Ruby config.

- link:
    ~/.env.d:
      glob: true
      path: ruby/env.d/*


# R config.

- shell:
    -
      - install -d -m 750 ~/.rlibs
      - Creating ~/.rlibs

- link:
    ~/.env.d:
      glob: true
      path: ruby/env.d/*


# Go config.

- shell:
    -
      - install -d -m 750 ~/.local/go/bin
      - Creating ~/.local/go/bin

- link:
    ~/.env.d:
      glob: true
      path: go/env.d/*


# ZSH.

- shell:
    -
      - install -d -m 750 ~/.zshrc.d
      - Creating ~/.zshrc.d
    -
      - install -d -m 750 ~/.zshenv.d
      - Creating ~/.zshenv.d
    -
      - ~/.local/bin/git-clone-idempotent https://github.com/zsh-users/antigen.git ~/.antigenrepo
      - Cloning or updating antigen

- link:
    ~/.zshrc: zsh/zshrc
    ~/.zshenv: zsh/zshenv
    ~/.zshenv.d:
      glob: true
      path: zsh/zshenv.d/*

- clean:
    - ~/.zshrc.d
    - ~/.zshenv.d


# Git config.

- link:
    ~/.gitconfig: git/gitconfig
    ~/.gitignore: git/gitignore


# Vim config.

- link:
    ~/.env.d:
      glob: true
      path: vim/env.d/*


# ccache config.

- link:
    ~/.ccache: /var/cache/ccache/${USER}
    ~/.ccache/ccache.conf: ccache/ccache.conf
    ~/.env.d:
      glob: true
      path: ccache/env.d/*
