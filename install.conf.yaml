- defaults:
    link:
      relink: true
      create: true
      force: true

- clean:
    - '~'


# Basic config.

- shell:
    -
      - install -d -m 750 ~/.config
      - Creating ~/.config
    -
      - install -d -m 750 ~/.env.d
      - Creating ~/.env.d
    -
      - install -d -m 750 ~/.local/bin
      - Creating ~/.local/bin
    -
      - install -d -m 750 ~/.local/lib64
      - Creating ~/.local/lib64
    -
      - install -d -m 750 ~/.local/share/man
      - Creating ~/.local/share/man

- link:
    ~/.dotfiles: ''
    ~/bin: ~/.local/bin
    ~/.local/man: ~/.local/share/man
    ~/.local/lib: ~/.local/lib64
    ~/Documents: ~/src
    ~/.env: base/env
    ~/.config:
      glob: true
      path: base/config/*
    ~/.env.d:
      glob: true
      path: base/env.d/*

- clean:
    - ~/.config
    - ~/.env.d


# Useful scripts.

- link:
    ~/.local/bin/:
      path: scripts/bin/*
      glob: true

- clean:
    - ~/.local/bin


# Perl config.

- shell:
    -
      - ./perl/setup-local.sh
      - Setting up a local Perl 5 directory

- link:
    ~/.env.d:
      glob: true
      path: perl/env.d/*


# Python config.

- link:
    ~/.pythonrc.py: python/pythonrc.py
    ~/.env.d:
      glob: true
      path: python/env.d/*

- shell:
    -
      - pip3 install --user --upgrade bumpversion diceware
      - Installing a few useful utilities


# Ruby config.

- link:
    ~/.env.d:
      glob: true
      path: ruby/env.d/*


# R config.

- shell:
    -
      - install -d -m 750 ~/.rlibs
      - Creating ~/.rlibs

- link:
    ~/.env.d:
      glob: true
      path: ruby/env.d/*


# Go config.

- shell:
    -
      - install -d -m 750 ~/.local/go/bin
      - Creating ~/.local/go/bin

- link:
    ~/.env.d:
      glob: true
      path: go/env.d/*


# ZSH.

- shell:
    -
      - install -d -m 750 ~/.zshrc.d
      - Creating ~/.zshrc.d
    -
      - install -d -m 750 ~/.zshenv.d
      - Creating ~/.zshenv.d
    -
      - >-
        ~/.local/bin/git-clone-idempotent
        https://github.com/zsh-users/antigen.git
        ~/.antigenrepo
      - Cloning or updating antigen

- link:
    ~/.config/liquidpromptrc: zsh/config/liquidpromptrc
    ~/.zshenv: zsh/zshenv
    ~/.zshrc: zsh/zshrc
    ~/.zshenv.d:
      glob: true
      path: zsh/zshenv.d/*
    ~/.zshrc.d:
      glob: true
      path: zsh/zshrc.d/*

- clean:
    - ~/.zshenv.d
    - ~/.zshrc.d


# Git config.

- link:
    ~/.config/git/config: git/config/git/config
    ~/.config/git/gitk: git/config/git/gitk
    ~/.config/git/ignore: git/config/git/ignore


# Ctags config.

- link:
    ~/.ctags: ctags/ctags


# Ack config.

- link:
    ~/.ackrc: ack/ackrc


# GPG config.

- shell:
    -
      - install -d -m 700 ~/.gnupg
      - Creating gpg directory

- link:
    ~/.gnupg/dirmngr.conf: gnupg/gnupg/dirmngr.conf
    ~/.gnupg/gpg-agent.conf: gnupg/gnupg/gpg-agent.conf
    ~/.gnupg/gpg.conf: gnupg/gnupg/gpg.conf
    ~/.gnupg/sks-keyservers.netCA.pem: gnupg/gnupg/sks-keyservers.netCA.pem
    ~/.gnupg/sks-keyservers.netCA.pem.asc:
      gnupg/gnupg/sks-keyservers.netCA.pem.asc


# Vim config.

- link:
    ~/.vimrc: vim/vimrc
    ~/.env.d:
      glob: true
      path: vim/env.d/*
    ~/.vim/ftdetect:
      glob: true
      path: vim/vim/ftdetect/*.vim
    ~/.vim/ftplugin:
      glob: true
      path: vim/vim/ftplugin/*.vim
    ~/.vim/syntax:
      glob: true
      path: vim/vim/syntax/*.vim

- clean:
    - ~/.vim/ftdetect
    - ~/.vim/ftplugin
    - ~/.vim/syntax

- shell:
    -
      - >-
        ~/.local/bin/git-clone-idempotent
        https://github.com/VundleVim/Vundle.vim.git
        ~/.vim/bundle/Vundle.vim
      - Cloning or updating Vundle
    -
      - vim +PluginInstall! +qall
      - Installing or updating Vundle plugins


# Tmux config.

- link:
    ~/.tmux.conf: tmux/tmux.conf

- shell:
    -
      - >-
        ~/.local/bin/git-clone-idempotent
        https://github.com/tmux-plugins/tpm.git
        ~/.tmux/plugins/tpm


# Nethack config.

- link:
    ~/.nethackrc: nethack/nethackrc

- shell:
    -
      - install -d -m 750 ~/.nethacklogs
      - Creating ~/.nethacklogs


# TeX config.

- shell:
    -
      - install -d -m 750 ~/texmf
      - Creating a local TeX directory

- link:
    ~/.env.d:
      glob: true
      path: tex/env.d/*


# ccache config.

- link:
    ~/.ccache: /var/cache/ccache/${USER}
    ~/.ccache/ccache.conf: ccache/ccache.conf
    ~/.env.d:
      glob: true
      path: ccache/env.d/*


# gdb config.

- shell:
    -
      - >-
        ~/.local/bin/git-clone-idempotent
        https://github.com/hugsy/gef.git
        ~/.gef
      - Cloning or updating GEF

- link:
    ~/.gdbinit: gdb/gdbinit


# Fonts.

- shell:
    -
      - install -d -m 750 ~/.local/share/fonts
      - Creating local font directory
    -
      - ~/dotfiles/fonts/powerline/install.sh
      - Installing powerline fonts
    -
      - ~/dotfiles/fonts/nerd-fonts/install.sh
      - Installing nerd fonts


# st config.

- shell:
    -
      - ./st/build-st.sh
      - Building and installing st

- link:
    ~/.env.d:
      glob: true
      path: st/env.d/*


# MPD config.

- shell:
    -
      - install -d -m 750 ~/.config/mpd/playlists
      - Creating ~/.config/mpd/playlists
    -
      - install -d -m 750 ~/.lyrics
      - Creating ~/.lyrics

- link:
    ~/.config/mpd/mpd.conf: mpd/config/mpd/mpd.conf
    ~/.config/ncmpcpp/config: mpd/config/ncmpcpp/config
    ~/.env.d:
      glob: true
      path: mpd/env.d/*


# MPV config.

- link:
    ~/.config/mpv/config: mpv/config/mpv/config
    ~/.config/mpv/input.conf: mpv/config/mpv/input.conf


# Bash config.

- link:
    ~/.bashrc: bash/bashrc
    ~/.bash_logout: bash/bash_logout
    ~/.bash_profile: bash/bash_profile


# i3wm config.

- link:
    ~/.xprofile: i3wm/xprofile
    ~/.config/speedswapper: i3wm/config/speedswapper
    ~/.config/i3/config: i3wm/config/i3/config
    ~/.config/i3pystatus:
      glob: true
      path: i3wm/config/i3pystatus/*.py

- clean:
    - ~/.config/i3pystatus

- shell:
    -
      - >-
        pip3 install --user --upgrade
        git+https://github.com/enkore/i3pystatus.git
        GeoIP
        basiciw
        colour
        dbus-python
        netifaces
        psutil
        requests
        speedtest-cli
      - Installing i3pystatus and optional module requirements
